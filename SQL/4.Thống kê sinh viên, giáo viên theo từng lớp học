CREATE PROCEDURE sp_ThongKeLopHoc
AS
BEGIN
    SELECT 
        l.TenLop,
        (SELECT COUNT(*) FROM HocSinh h WHERE h.MaLop = l.MaLop) AS SoLuongHocSinh,
        (SELECT COUNT(DISTINCT MaGV) FROM PhanCong p WHERE p.MaLop = l.MaLop) AS SoLuongGiaoVienDay
    FROM LopHoc l;
END;
GO
